---
layout: post
title: Ko-web Server Construction Feat.AWS [2] (한국어)
tags: [AWS, cloud computing, ko-web, ubuntu]
feature-img: "assets/img/0.post/2024-08-03/background.png"
thumbnail: "assets/img/0.post/2024-08-03/background.png"
categories: cloud computing, ubuntu
---

[**이전 포스팅**](https://koderwiki.github.io/cloud/computing,/ubuntu/2024/08/03/server-1.html) 에 이어서 이번 포스팅에서는 **Route53** 을 이용해서 도메인을 생성하고 **Nginx** 를 이용해서 proxy 설정을 해보겠습니다.

## Elastic IP

**EC2** 에서 Instance를 생성하면 Instance 마다 매핑되는 IP 주소가 있습니다. 생성된 Instance 에서 **Public IP** 를 확인하면 되는데, 이 것의 문제는 할당된 주소가 쉽게 바뀐다는 것입니다. Instace를 중지하거나 시작할 때마다 변경되어 개발할때 복잡해집니다.
<br>
이 때문에 **Elastic IP** 를 할당해 주어야 합니다.

![image](https://github.com/user-attachments/assets/5df79a92-c48d-406a-930f-cf301571cdb7)
<br>
**EC2** 에서 Elastic IP를 쉽게 생성할 수 있습니다. AWS에서는 Elastic IP는 계정 당 1개는 무료로 제공해 줍니다. <br>
**하지만 Elastic IP를 생성하고 이를 Instance에 연결하지 않고 방치하면 요금이 청구될 수 있습니다!**

![image](https://github.com/user-attachments/assets/6e3f9449-e69e-43bf-9bb8-dc232e2a7db1)
<br>
생성한 후에 자신의 instance에 연결해주면 완료입니다!

## Route 53
<br>
![image](https://github.com/user-attachments/assets/279771f5-884f-4f4e-9ada-d8e28f4d0bcf)
<br>
AWS의 **Route 53** 에서 자신의 도메인을 쉽고 간단하게 생성할 수 있습니다. 물론 일정량의 금액을 매년 지불해야 합니다. 또한 도메인 별로 가격도 다릅니다!

![image](https://github.com/user-attachments/assets/5e62cfaa-7a0f-4809-b076-1faa22b10f69)
<br>
도메인을 생성한 후에 record를 생성하여 방금 위에서 만든 **Elastic IP**를 연결해 주시면 됩니다.<br>
**여기서 record는 www.하나하고 기본적인 도메인 하나씩 만들어 주시면 됩니다**
<br>
이후 다시 콘솔에 연결해서 다음 명령어로 실행해 보시면 도메인으로 사이트 접속이 가능해집니다.

```bash
$ python3 [파일 명]
```
<br>
하지만 아직 프록시 설정을 안했기 때문에 **포트번호** (Flask 기준 :5000) 를 붙여주셔야 접속할 수 있습니다. <br>
지금부터 **Nginx** 를 이용해서 프록시 설정을 해보겠습니다.

## Nginx

**Nginx** 는 웹 서버 소프트웨어로 **리버스 프록시** 기능을 제공해 줍니다.<br>
유저 -> Nginx -> 웹 서버 로 구성해서 사용자의 요청을 Nginx가 대신 웹서버로 전달해 줍니다

![image](https://github.com/user-attachments/assets/dd38e4cd-1991-4860-bba4-6a65ebfafc44)
<br>
리버스 프록시를 설정해주면 포트번호를 숨길 수 있습니다. <br>
어려워 보이지만 매우 간단합니다. 설치후에 파일만 수정해 주면 됩니다.
<br>
**1. Nginx 설치**

```bash
$ sudo apt install nginx
```
<br>
이후 마찬가지로 올바르게 설치되었는지 확인해줍니다.

```bash
$ nginx --version
```

















